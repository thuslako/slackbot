services:
  - type: web
    name: on-call-bot
    plan: starter # free will sleep; starter keeps it awake
    region: oregon # or frankfurt if your team is EU-based
    runtime: node # Renderâ€™s Node environment
    buildCommand: |
      corepack enable
      corepack prepare yarn@latest --activate
      yarn install --frozen-lockfile
      yarn build
    startCommand: yarn start
    autoDeploy: true
    healthCheckPath: /healthz
    envVars:
      - key: NODE_ENV
        value: production
      - key: SLACK_BOT_TOKEN
        sync: false
      - key: SLACK_SIGNING_SECRET
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: SENTRY_WEBHOOK_SECRET
        sync: false
      - key: GITLAB_WEBHOOK_SECRET
        sync: false
